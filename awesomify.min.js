/*
 * Awesomify - 1.0.0
 * Ben Meyrick - http://bameyrick.co.uk
 * 
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(n){function h(){if(window.SpeedTest)SpeedTest.CheckSpeed(function(n){var t=36e4;i=n;i<=250?(r=40,u=!1):i>250&&i<=450?(r=50,u=!1,t=18e4):i>450&&i<=750?(r=60,u=!1,t=12e4):i>750&&i<=1e3?(r=70,u=!1,t=6e4):i>1e3&&i<=4e3?(r=80,u=!0,t=3e4):i>4e3&&i<=1e4?(r=15e3,u=!0):i>1e4&&(r=99,u=!0,t=1e4,n);setTimeout(function(){h()},t)});else throw Error("SpeedTest not initalised. Awesomify cannot run without SpeedTest.");}function f(){var n,r,u;if(i!=undefined){if(window.outerWidth>s)for(s=window.outerWidth,n=0,r=e.length;n<r;n++)u=e[n],t.lazy&&v(u)||!t.lazy?c(u):n=r+1}else setTimeout(function(){f()},100)}function c(n){var f,s,o,h,i;if(n&&(s=!1,n.tagName.toLowerCase()=="img"?f=n.getAttribute("src").split("quality"):(f=n.style.backgroundImage.replace("url(","").replace(")","").split("quality"),s=!0),f.length>1)){var c=n.offsetWidth,v=n.offsetHeight,e=c,y="width";c<v&&(y="height",e=v);a&&u&&(e=e*2);o=f[0]+"quality="+r;f[1].indexOf("width")>=1&&f[1].indexOf("height")>=1?(h=l(e,t.sizesSquare),i=f[1].split("rnd=")[1],i.indexOf("blur")>=1&&(i=i.split("&blur=")[0]),o+="&width="+h+"&height="+h+"&rnd="+i):(i=f[1].split("rnd=")[1],i.indexOf("blur")>=1&&(i=i.split("&blur=")[0]),o+="&"+y+"="+l(e,t.sizes)+"&rnd="+i);s?n.style.backgroundImage="url("+o+")":n.setAttribute("src",o)}}function v(n){for(var t=n.offsetTop,i=n.offsetLeft;n.offsetParent;)n=n.offsetParent,t+=n.offsetTop,i+=n.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth}function l(n,t){for(var i=null,r=0,u=t.length;r<u;r++)(i==null||Math.abs(t[r]-n)<Math.abs(i-n))&&(i=t[r]);return i}var t={lazy:!0,onResize:!0,cls:"awesomify",sizes:[240,320,500,640,768,960,1280,1366,2560],sizesSquare:[40,80,120,160,320,640]},e,i,r,u,s=0,a=window.devicePixelRatio>1,o;n.Options=function(){return t};n.Init=function(n){h();n&&(n.lazy&&(t.lazy=n.lazy),n.onResize&&(t.onResize=n.onResize),n.cls&&(t.cls=n.cls),n.sizes&&(t.sizes=n.sizes),n.sizesSquare&&(t.sizesSquare=n.sizesSquare));e=document.querySelectorAll("."+t.cls);t.onResize&&o(window,"resize",f);t.lazy&&o(window,"scroll",f);f()};n.FindNew=function(){e=document.querySelectorAll("."+t.cls);f()};n.Me=function(n){c(n)};o=function(n,t,i){n!=null&&typeof n!="undefined"&&(n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i)};typeof String.prototype.contains=="undefined"&&(String.prototype.contains=function(n){return this.indexOf(n)!=-1})})(window.Awesomify=window.Awesomify||{});