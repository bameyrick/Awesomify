/*
 * Awesomify - 1.2.3
 * Ben Meyrick - http://bameyrick.co.uk
 * 
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(n){function l(){if(window.SpeedTest)SpeedTest.CheckSpeed(function(n){var t=36e4;i=n;i<=250?(r=40,u=!1):i>250&&i<=450?(r=50,u=!1,t=18e4):i>450&&i<=750?(r=60,u=!1,t=12e4):i>750&&i<=1e3?(r=70,u=!1,t=6e4):i>1e3&&i<=4e3?(r=80,u=!0,t=3e4):i>4e3&&i<=1e4?(r=90,u=!0,t=15e3):i>1e4&&(r=99,u=!0,t=1e4);setTimeout(function(){l()},t)});else throw Error("SpeedTest not initalised. Awesomify cannot run without SpeedTest.");}function e(n){var r,o,u;if(i!=undefined){if(window.outerWidth>c||n)for(c=window.outerWidth,r=0,o=f.length;r<o;r++)if(u=f[r],t.lazy&&y(u)||!t.lazy)a(u);else break}else setTimeout(function(){e()},100)}function a(n){var i,s,f,c,e;if(n){s=!1;n.tagName.toLowerCase()=="img"?(i=n.getAttribute("src"),i.length==0&&(i=n.getAttribute("data-src"))):(i=n.style.backgroundImage,i=i.length>0?i.replace("url(","").replace(")",""):n.getAttribute("data-src"),s=!0);i=i.split("?");f=p(i[1]);f.quality=r;i.length>0&&(w=n.offsetWidth,h=n.offsetHeight,input=w,direction="width",removeDirection="height",newSrc=i[0]+"?",w<h&&(direction="height",removeDirection="width",input=h),v&&u&&(input=input*2),i[1]?i[1].indexOf("width")>=1&&i[1].indexOf("height")>=1?(c=o(input,t.sizesSquare),f.width=c,f.height=c):(f[direction]=o(input,t.sizes),delete f[removeDirection]):(f[direction]=o(input,t.sizes),delete f[removeDirection]));for(e in f)f.hasOwnProperty(e)&&(newSrc+="&"+e+"="+f[e]);s?n.style.backgroundImage="url("+newSrc+")":n.setAttribute("src",newSrc)}}function y(n){for(var t=n.offsetTop,i=n.offsetLeft;n.offsetParent;)n=n.offsetParent,t+=n.offsetTop,i+=n.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth}function o(n,t){for(var i=null,r=0,u=t.length;r<u;r++)(i==null||Math.abs(t[r]-n)<Math.abs(i-n))&&(i=t[r]);return i}function p(n){for(var i={},t,u=/\+/g,f=/([^&=]+)=?([^&]*)/g,r=function(n){return decodeURIComponent(n.replace(u," "))};t=f.exec(n);)i[r(t[1]).toLowerCase()]=r(t[2]);return i}var t={lazy:!0,onResize:!0,cls:"awesomify",sizes:[240,320,500,640,768,960,1280,1366,1920,2560],sizesSquare:[40,60,80,120,160,320,640]},f,i,r,u,c=0,v=window.devicePixelRatio>1,s;n.Options=function(){return t};n.Init=function(n){l();n&&(n.lazy&&(t.lazy=n.lazy),n.onResize&&(t.onResize=n.onResize),n.cls&&(t.cls=n.cls),n.sizes&&(t.sizes=n.sizes),n.sizesSquare&&(t.sizesSquare=n.sizesSquare));f=document.querySelectorAll("."+t.cls);t.onResize&&s(window,"resize",e);t.lazy&&s(window,"scroll",function(){e(!0)});e()};n.FindNew=function(){f=document.querySelectorAll("."+t.cls);e()};n.Me=function(n){f.push(n);a(n)};s=function(n,t,i){n!=null&&typeof n!="undefined"&&(n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i)}})(window.Awesomify=window.Awesomify||{});